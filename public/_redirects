# Sitemap aliases — handle various crawler patterns
/sitemap_index.xml /sitemap.xml 301
/sitemap-index.xml /sitemap.xml 301
/sitemaps.xml /sitemap.xml 301
/sitemap1.xml /sitemap.xml 301
/post-sitemap.xml /sitemap.xml 301
/page-sitemap.xml /sitemap.xml 301
/sitemap-*.xml /sitemap.xml 301

# Root → English homepage (server-side 301, faster than client-side Next.js redirect)
/ /en/ 301

# Language root: enforce trailing slash
/en /en/ 301
/zh /zh/ 301
/ja /ja/ 301
/ko /ko/ 301

# Static pages: enforce trailing slash (trailingSlash: true in next.config.mjs)
/:lang/about /:lang/about/ 301
/:lang/contact /:lang/contact/ 301
/:lang/privacy-policy /:lang/privacy-policy/ 301
/:lang/editorial-policy /:lang/editorial-policy/ 301
/:lang/content-updates /:lang/content-updates/ 301
# Cloudflare Pages may resolve directory requests to index.txt in Next export output.
# Normalize those requests before generic slug rules to avoid /index.txt/ 404 URLs.
/:lang/guides/index.txt /:lang/guides/ 301
/:lang/guides/index.txt/ /:lang/guides/ 301
/:lang/guides/:slug/index.txt /:lang/guides/:slug/ 301
/:lang/guides/:slug/index.txt/ /:lang/guides/:slug/ 301
/:lang/guides /:lang/guides/ 301
/:lang/guides/:slug /:lang/guides/:slug/ 301

# Quiz and result: enforce trailing slash
/:lang/quiz /:lang/quiz/ 301
/:lang/result /:lang/result/ 301
